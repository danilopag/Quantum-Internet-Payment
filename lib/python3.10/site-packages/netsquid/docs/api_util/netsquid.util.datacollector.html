<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>netsquid.util.datacollector &mdash; NetSquid 1.1.7 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=370aedac"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="netsquid.util.cycache" href="netsquid.util.cycache.html" />
    <link rel="prev" title="netsquid.util.simstats" href="netsquid.util.simstats.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #E3E3E3" >

          
          
          <a href="../index.html" class="icon icon-home">
            NetSquid
              <img src="../_static/squid-150.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AUTHORS.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learn NetSquid</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">NetSquid in 10 minutes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.intro.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.qubits.html">Qubits and quantum computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.pydynaa.html">Discrete event simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.components.html">Modelling of network components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.nodes.html">Nodes and Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.protocols.html">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.quantumprocessor.html">The Quantum Processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.simulation.html">A full simulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../learn.examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../learn_examples/learn.examples.teleportation.html">Teleportation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learn_examples/learn.examples.repeater.html">Repeater with purification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learn_examples/learn.examples.repeater_chain.html">Repeater chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learn_examples/learn.examples.simple_link.html">A simple link layer protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learn_examples/learn.examples.magic_simple_link.html">Faster Link layer Protocol using abstraction</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html">NetSquid package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../netsquid.qubits.html">netsquid.qubits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.qformalism.html">netsquid.qubits.qformalism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.qubitapi.html">netsquid.qubits.qubitapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.operators.html">netsquid.qubits.operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.cliffords.html">netsquid.qubits.cliffords</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.ketstates.html">netsquid.qubits.ketstates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.state_sampler.html">netsquid.qubits.state_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.qubit.html">netsquid.qubits.qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.qstate.html">netsquid.qubits.qstate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.qrepr.html">netsquid.qubits.qrepr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.kettools.html">netsquid.qubits.kettools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.dmtools.html">netsquid.qubits.dmtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.sparsedmtools.html">netsquid.qubits.sparsedmtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.stabtools.html">netsquid.qubits.stabtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.gslctools.html">netsquid.qubits.gslctools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.qreprutil.html">netsquid.qubits.qreprutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.ketutil.html">netsquid.qubits.ketutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.dmutil.html">netsquid.qubits.dmutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.sparseutil.html">netsquid.qubits.sparseutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.gslcutil.html">netsquid.qubits.gslcutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_qubits/netsquid.qubits.opmath.html">netsquid.qubits.opmath</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../netsquid.components.html">netsquid.components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.component.html">netsquid.components.component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.channel.html">netsquid.components.channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.qchannel.html">netsquid.components.qchannel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.cchannel.html">netsquid.components.cchannel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.cqchannel.html">netsquid.components.cqchannel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.qmemory.html">netsquid.components.qmemory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.instructions.html">netsquid.components.instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.qprogram.html">netsquid.components.qprogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.qprocessor.html">netsquid.components.qprocessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.clock.html">netsquid.components.clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.qsource.html">netsquid.components.qsource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.qdetector.html">netsquid.components.qdetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.switch.html">netsquid.components.switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_components/netsquid.components.ccoding.html">netsquid.components.ccoding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../netsquid.components.models.html">netsquid.components.models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_models/netsquid.components.models.model.html">netsquid.components.models.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_models/netsquid.components.models.delaymodels.html">netsquid.components.models.delaymodels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_models/netsquid.components.models.errormodels.html">netsquid.components.models.errormodels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_models/netsquid.components.models.qerrormodels.html">netsquid.componentsmodels.qerrormodels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_models/netsquid.components.models.cerrormodels.html">netsquid.components.models.cerrormodels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../netsquid.nodes.html">netsquid.nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_nodes/netsquid.nodes.node.html">netsquid.nodes.node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_nodes/netsquid.nodes.connections.html">netsquid.nodes.connections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_nodes/netsquid.nodes.network.html">netsquid.nodes.network</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../netsquid.protocols.html">netsquid.protocols</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_protocols/netsquid.protocols.protocol.html">netsquid.protocols.protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_protocols/netsquid.protocols.nodeprotocols.html">netsquid.protocols.nodeprotocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_protocols/netsquid.protocols.serviceprotocol.html">netsquid.protocols.serviceprotocol</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../netsquid.util.html">netsquid.util</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="netsquid.util.simtools.html">netsquid.util.simtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="netsquid.util.simlog.html">netsquid.util.simlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="netsquid.util.simstats.html">netsquid.util.simstats</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">netsquid.util.datacollector</a></li>
<li class="toctree-l3"><a class="reference internal" href="netsquid.util.cycache.html">netsquid.util.cycache</a></li>
<li class="toctree-l3"><a class="reference internal" href="netsquid.util.cymath.html">netsquid.util.cymath</a></li>
<li class="toctree-l3"><a class="reference internal" href="netsquid.util.constrainedmap.html">netsquid.util.constrainedmap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../netsquid.examples.html">netsquid.examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.teleportation.html">netsquid.examples.teleportation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.entanglenodes.html">netsquid.examples.entanglenodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.purify.html">netsquid.examples.purify</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.repeater.html">netsquid.examples.repeater</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.repeater_chain.html">netsquid.examples.repeater_chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.simple_link.html">netsquid.examples.simple_link</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_examples/netsquid.examples.magic_simple_link.html">netsquid.examples.magic_simple_link</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_pydynaa.html">pyDynAA package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html">pydynaa.Entity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html#pydynaa-event">pydynaa.Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html#pydynaa-eventtype">pydynaa.EventType</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html#pydynaa-eventexpression">pydynaa.EventExpression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html#pydynaa-eventhandler">pydynaa.EventHandler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html#pydynaa-expressionhandler">pydynaa.ExpressionHandler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pydynaa.html#pydynaa-simulationengine">pydynaa.SimulationEngine</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL-SOURCE.html">Installation from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #E3E3E3" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NetSquid</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api_reference.html">NetSquid package</a></li>
          <li class="breadcrumb-item"><a href="../netsquid.util.html">netsquid.util</a></li>
      <li class="breadcrumb-item active">netsquid.util.datacollector</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api_util/netsquid.util.datacollector.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="netsquid.util.simstats.html" class="btn btn-neutral float-left" title="netsquid.util.simstats" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="netsquid.util.cycache.html" class="btn btn-neutral float-right" title="netsquid.util.cycache" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-netsquid.util.datacollector">
<span id="netsquid-util-datacollector"></span><h1>netsquid.util.datacollector<a class="headerlink" href="#module-netsquid.util.datacollector" title="Link to this heading"></a></h1>
<p>Defines a data collector, an entity that, when triggered, stores data in a
dataframe using a user specified <code class="docutils literal notranslate"><span class="pre">get_data_function</span></code>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">netsquid.util.datacollector.</span></span><span class="sig-name descname"><span class="pre">DataCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_data_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_time_stamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_entity_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="../pydynaa.html#pydynaa.core.Entity" title="pydynaa.core.Entity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Entity</span></code></a></p>
<p>A data collector that collects data when specified events are triggered.</p>
<p>Data is collected when a (combination of) <a class="reference internal" href="../pydynaa.html#pydynaa.core.Event" title="pydynaa.core.Event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Event</span></code></a>(s) trigger
the user defined <a class="reference internal" href="#netsquid.util.datacollector.DataCollector.get_data_function" title="netsquid.util.datacollector.DataCollector.get_data_function"><code class="xref py py-attr docutils literal notranslate"><span class="pre">get_data_function</span></code></a>.
The output of this function, which
should be a dict, is stored in a <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> with the keys as
column names. Aside from the data function output, two columns are added:
the <code class="docutils literal notranslate"><span class="pre">time_stamp</span></code> at the moment of collecting and the <code class="docutils literal notranslate"><span class="pre">entity_name</span></code> of the
<a class="reference internal" href="../pydynaa.html#pydynaa.core.Entity" title="pydynaa.core.Entity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Entity</span></code></a> that triggered this data collection.</p>
<p>Data can be accessed via a <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> object or as a raw list of dicts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_data_function</strong> (<em>function</em>) – Callback function used to collect data. Should accept an event or an event expression as a parameter
and return a dict with the collected data.</p></li>
<li><p><strong>include_time_stamp</strong> (<em>bool, optional</em>) – Whether to include a simulation time stamp column when data is collected.</p></li>
<li><p><strong>include_entity_name</strong> (<em>bool, optional</em>) – Whether to include the name of the entity that scheduled the last event that triggered
the data collection.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>When an <a class="reference internal" href="../pydynaa.html#pydynaa.core.EventExpression" title="pydynaa.core.EventExpression"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EventExpression</span></code></a> triggers the data
collection, the event passed to <a class="reference internal" href="#netsquid.util.datacollector.DataCollector.get_data_function" title="netsquid.util.datacollector.DataCollector.get_data_function"><code class="xref py py-attr docutils literal notranslate"><span class="pre">get_data_function</span></code></a>
will be None and the <code class="docutils literal notranslate"><span class="pre">entity_name</span></code> in the dataframe will be set to a default value:
‘EventExpression’.</p>
<p>When adding multiple triggers, an <a class="reference internal" href="../pydynaa.html#pydynaa.core.EventExpression" title="pydynaa.core.EventExpression"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EventExpression</span></code></a>
will be built. So even when <code class="docutils literal notranslate"><span class="pre">combine_rule</span></code> is “OR” and only (Entity, EventType) tuples
are in the triggers list, the <code class="docutils literal notranslate"><span class="pre">entity_name</span></code> will still be <a class="reference internal" href="../pydynaa.html#pydynaa.core.EventExpression" title="pydynaa.core.EventExpression"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EventExpression</span></code></a> and not
the name of the triggering Entity.</p>
<p class="rubric">Examples</p>
<p>Create a data collector, adding its get data function in different ways:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">netsquid</span> <span class="k">as</span> <span class="nn">ns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.util.datacollector</span> <span class="kn">import</span> <span class="n">DataCollector</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using a predefined function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_source_id</span><span class="p">(</span><span class="n">evexpr</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">event</span> <span class="o">=</span> <span class="n">evexpr</span><span class="o">.</span><span class="n">triggered_events</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">uid</span><span class="p">}</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DataCollector</span><span class="p">(</span><span class="n">get_source_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using a predefined function with additional arguments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dummy_entity</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">Entity</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_source_equals_entity</span><span class="p">(</span><span class="n">evexpr</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="n">dummy_entity</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">event</span> <span class="o">=</span> <span class="n">evexpr</span><span class="o">.</span><span class="n">triggered_events</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;equals&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="n">entity</span><span class="p">}</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DataCollector</span><span class="p">(</span><span class="n">get_source_equals_entity</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using a callable class</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">AddingCallableClass</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_1</span><span class="p">,</span> <span class="n">var_2</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">var_1</span> <span class="o">=</span> <span class="n">var_1</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">var_2</span> <span class="o">=</span> <span class="n">var_2</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evexpr</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_2</span><span class="p">}</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DataCollector</span><span class="p">(</span><span class="n">AddingCallableClass</span><span class="p">(</span><span class="n">var_1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">var_2</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Add a trigger when to collect data (for more examples see the <code class="docutils literal notranslate"><span class="pre">collect_on()</span></code> documentation):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dummy_entity_2</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">Entity</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rain_event</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="s2">&quot;Rain&quot;</span><span class="p">,</span> <span class="s2">&quot;Rainy weather&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">collect_on</span><span class="p">([(</span><span class="n">dummy_entity_2</span><span class="p">,</span> <span class="n">rain_event</span><span class="p">)])</span>
</pre></div>
</div>
<p>Checking the results after creating a data collector and defining when to collect data as shown above:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dummy_entity_2</span><span class="o">.</span><span class="n">_schedule_now</span><span class="p">(</span><span class="n">rain_event</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dc</span><span class="o">.</span><span class="n">dataframe</span><span class="p">)</span>  
<span class="go">   time_stamp entity_name  value</span>
<span class="go">0         0.0   entity_10    3.0</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector.priority">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priority</span></span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector.priority" title="Link to this definition"></a></dt>
<dd><p>priority of this data collector.</p>
<p>By default data collectors have a higher priority (default is 3) to handle
an event than the regular event handlers (default is 5) used by waiting entities.
Priority can be set from 1 (highest) to 10 (lowest).</p>
<p class="rubric">Notes</p>
<p>When the priorities are equal, as is the case for regular event handlers
that trigger on the same event, the order the handlers are called is
not defined (in principle random).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector.get_data_function">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_data_function</span></span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector.get_data_function" title="Link to this definition"></a></dt>
<dd><p>callback function used to collect data. Should accept an event (expression) as a parameter                and return a dict with the collected data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>func</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector.databuffer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">databuffer</span></span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector.databuffer" title="Link to this definition"></a></dt>
<dd><p>data collected since the last call to <a class="reference internal" href="#netsquid.util.datacollector.DataCollector.dataframe" title="netsquid.util.datacollector.DataCollector.dataframe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dataframe</span></code></a>.</p>
<p class="rubric">Notes</p>
<p>This list is cleared after every call to <a class="reference internal" href="#netsquid.util.datacollector.DataCollector.dataframe" title="netsquid.util.datacollector.DataCollector.dataframe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dataframe</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector.dataframe">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dataframe</span></span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector.dataframe" title="Link to this definition"></a></dt>
<dd><p>DataFrame of all collected data.</p>
<p>When the <a class="reference internal" href="#netsquid.util.datacollector.DataCollector.get_data_function" title="netsquid.util.datacollector.DataCollector.get_data_function"><code class="xref py py-attr docutils literal notranslate"><span class="pre">get_data_function</span></code></a> is called,
its output (a dict of name: value) will
be stored together with current <code class="docutils literal notranslate"><span class="pre">time_stamp</span></code> and triggering <code class="docutils literal notranslate"><span class="pre">entity_name</span></code> in a
buffer (a list of dicts). This is done to increase the performance: appending
multiple rows of data one by one is slower than appending them all at once.</p>
<p>When dataframe is called, it will check if there is data in the buffer.
If there is buffered data, this will be added to the dataframe and the buffer
is cleared.</p>
<p class="rubric">Notes</p>
<p>In the process of adding new data, a new <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>
instance is created. When there is no buffered data, no new instance will be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector.collect_on">
<span class="sig-name descname"><span class="pre">collect_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triggers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine_rule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector.collect_on" title="Link to this definition"></a></dt>
<dd><p>Define when to collect data by waiting for events and/or event expressions.</p>
<p>All triggers are converted to an event expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>triggers</strong> (list of tuples (<a class="reference internal" href="../pydynaa.html#pydynaa.core.Entity" title="pydynaa.core.Entity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Entity</span></code></a>,                   <a class="reference internal" href="../pydynaa.html#pydynaa.core.EventType" title="pydynaa.core.EventType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EventType</span></code></a>) or <a class="reference internal" href="../pydynaa.html#pydynaa.core.EventExpression" title="pydynaa.core.EventExpression"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EventExpression</span></code></a>) – The source entity/entities or event expression(s) that should trigger data collection.</p></li>
<li><p><strong>combine_rule</strong> (<em>str, optional</em>) – Whether to collect data when all (“AND”) or any (“OR”) of the triggers trigger. When multiple
triggers are specified, you have to define this because there is no default rule set.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a data collector and set triggers in different ways, where each
call to <code class="docutils literal notranslate"><span class="pre">collect_on</span></code> overwrites the previous triggers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_entity</span> <span class="o">=</span> <span class="n">pydynaa</span><span class="o">.</span><span class="n">Entity</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rain_event</span> <span class="o">=</span> <span class="n">pydynaa</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="s2">&quot;Rain&quot;</span><span class="p">,</span> <span class="s2">&quot;Rainy weather&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sun_event</span> <span class="o">=</span> <span class="n">pydynaa</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="s2">&quot;Sun&quot;</span><span class="p">,</span> <span class="s2">&quot;Sunny weather&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evexpr_rain</span> <span class="o">=</span> <span class="n">pydynaa</span><span class="o">.</span><span class="n">EventExpression</span><span class="p">(</span><span class="n">event_type</span><span class="o">=</span><span class="n">rain_event</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evexpr_sun</span> <span class="o">=</span> <span class="n">pydynaa</span><span class="o">.</span><span class="n">EventExpression</span><span class="p">(</span><span class="n">event_type</span><span class="o">=</span><span class="n">sun_event</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evexpr_rainbow</span> <span class="o">=</span> <span class="n">evexpr_rain</span> <span class="o">&amp;</span> <span class="n">evexpr_sun</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_weather_conditions</span><span class="p">(</span><span class="n">evexpr</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">events</span> <span class="o">=</span> <span class="n">evexpr</span><span class="o">.</span><span class="n">triggered_events</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">conditions</span> <span class="o">=</span> <span class="s2">&quot;&amp; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="n">conditions</span><span class="p">}</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DataCollector</span><span class="p">(</span><span class="n">get_weather_conditions</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collecton a single (entity, event type) tuple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">collect_on</span><span class="p">([(</span><span class="n">test_entity</span><span class="p">,</span> <span class="n">rain_event</span><span class="p">)])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect on a single EventExpression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">collect_on</span><span class="p">([</span><span class="n">evexpr_rainbow</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect on multiple triggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">collect_on</span><span class="p">([(</span><span class="n">test_entity</span><span class="p">,</span> <span class="n">rain_event</span><span class="p">),</span> <span class="n">evexpr_sun</span><span class="p">],</span> <span class="s2">&quot;OR&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect on a combination of triggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">collect_on</span><span class="p">([(</span><span class="n">test_entity</span><span class="p">,</span> <span class="n">sun_event</span><span class="p">),</span> <span class="n">evexpr_rainbow</span><span class="p">],</span> <span class="s2">&quot;AND&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>All previous triggers of this data collector will be dismissed when calling this function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="netsquid.util.datacollector.DataCollector.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#netsquid.util.datacollector.DataCollector.reset" title="Link to this definition"></a></dt>
<dd><p>Reset this data collector, i.e. do not collect data for any previous defined trigger.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="netsquid.util.simstats.html" class="btn btn-neutral float-left" title="netsquid.util.simstats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="netsquid.util.cycache.html" class="btn btn-neutral float-right" title="netsquid.util.cycache" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2021, TNO and TUDelft (QuTech).</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 1.1.7
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      <dd><a href="/1-1-stable/">1.1.5</a></dd>
      <dd><a href="/1-0-stable/">1.0.7</a></dd>
      <dd><a href="/0-10-stable/">0.10.4</a></dd>
      <dd><a href="/0-9-stable/">0.9.11</a></dd>
      <dd><a href="/0-8-stable/">0.8.7</a></dd>
      <dd><a href="/0-7-stable/">0.7.5</a></dd>
      <dd><a href="/0-6-stable/">0.6.4</a></dd>
      <dd><a href="/0-5-stable/">0.5.2</a></dd>
      <dd><a href="/0-4-stable/">0.4.2</a></dd>
      <dd><a href="/0-3-stable/">0.3.5</a></dd>
      <dd><a href="/latest-release/">latest release</a></dd>
      <dd><a href="/master/">master branch</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".highlight-default .highlight").each(function() {
            if ($(this).find(".gp").length > 0) {
             $(this).prepend("<div class='codebtn btn btn-neutral float-right'><div class='gp'>>>></div><div>");
             $(this).children("pre").contents().filter(function() {return this.nodeType === 3;}).wrap("<span></span>").end();
            }
        });
        $(".highlight-default .highlight .codebtn").click(function() {
            $(this).parent().children("pre").find(".gp").toggleClass("hidden");
            var traceback_elem = $(this).parent().children("pre").find(".gt, .go");
            traceback_elem.toggleClass("hidden");
            traceback_elem.nextUntil(".gp, .go").toggleClass("hidden");

        })
    });
</script>


</body>
</html>