<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Quantum Processor &mdash; NetSquid 1.1.7 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=370aedac"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="A full simulation" href="tutorial.simulation.html" />
    <link rel="prev" title="Protocols" href="tutorial.protocols.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #E3E3E3" >

          
          
          <a href="index.html" class="icon icon-home">
            NetSquid
              <img src="_static/squid-150.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="INSTALL.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="AUTHORS.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learn NetSquid</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">NetSquid in 10 minutes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.intro.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial.qubits.html">Qubits and quantum computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.pydynaa.html">Discrete event simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.components.html">Modelling of network components</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.nodes.html">Nodes and Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.protocols.html">Protocols</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">The Quantum Processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.simulation.html">A full simulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="learn.examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="learn_examples/learn.examples.teleportation.html">Teleportation</a></li>
<li class="toctree-l2"><a class="reference internal" href="learn_examples/learn.examples.repeater.html">Repeater with purification</a></li>
<li class="toctree-l2"><a class="reference internal" href="learn_examples/learn.examples.repeater_chain.html">Repeater chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="learn_examples/learn.examples.simple_link.html">A simple link layer protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="learn_examples/learn.examples.magic_simple_link.html">Faster Link layer Protocol using abstraction</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">NetSquid package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="netsquid.qubits.html">netsquid.qubits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.qformalism.html">netsquid.qubits.qformalism</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.qubitapi.html">netsquid.qubits.qubitapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.operators.html">netsquid.qubits.operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.cliffords.html">netsquid.qubits.cliffords</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.ketstates.html">netsquid.qubits.ketstates</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.state_sampler.html">netsquid.qubits.state_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.qubit.html">netsquid.qubits.qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.qstate.html">netsquid.qubits.qstate</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.qrepr.html">netsquid.qubits.qrepr</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.kettools.html">netsquid.qubits.kettools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.dmtools.html">netsquid.qubits.dmtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.sparsedmtools.html">netsquid.qubits.sparsedmtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.stabtools.html">netsquid.qubits.stabtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.gslctools.html">netsquid.qubits.gslctools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.qreprutil.html">netsquid.qubits.qreprutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.ketutil.html">netsquid.qubits.ketutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.dmutil.html">netsquid.qubits.dmutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.sparseutil.html">netsquid.qubits.sparseutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.gslcutil.html">netsquid.qubits.gslcutil</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_qubits/netsquid.qubits.opmath.html">netsquid.qubits.opmath</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netsquid.components.html">netsquid.components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.component.html">netsquid.components.component</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.channel.html">netsquid.components.channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.qchannel.html">netsquid.components.qchannel</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.cchannel.html">netsquid.components.cchannel</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.cqchannel.html">netsquid.components.cqchannel</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.qmemory.html">netsquid.components.qmemory</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.instructions.html">netsquid.components.instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.qprogram.html">netsquid.components.qprogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.qprocessor.html">netsquid.components.qprocessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.clock.html">netsquid.components.clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.qsource.html">netsquid.components.qsource</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.qdetector.html">netsquid.components.qdetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.switch.html">netsquid.components.switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_components/netsquid.components.ccoding.html">netsquid.components.ccoding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netsquid.components.models.html">netsquid.components.models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_models/netsquid.components.models.model.html">netsquid.components.models.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_models/netsquid.components.models.delaymodels.html">netsquid.components.models.delaymodels</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_models/netsquid.components.models.errormodels.html">netsquid.components.models.errormodels</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_models/netsquid.components.models.qerrormodels.html">netsquid.componentsmodels.qerrormodels</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_models/netsquid.components.models.cerrormodels.html">netsquid.components.models.cerrormodels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netsquid.nodes.html">netsquid.nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_nodes/netsquid.nodes.node.html">netsquid.nodes.node</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_nodes/netsquid.nodes.connections.html">netsquid.nodes.connections</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_nodes/netsquid.nodes.network.html">netsquid.nodes.network</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netsquid.protocols.html">netsquid.protocols</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_protocols/netsquid.protocols.protocol.html">netsquid.protocols.protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_protocols/netsquid.protocols.nodeprotocols.html">netsquid.protocols.nodeprotocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_protocols/netsquid.protocols.serviceprotocol.html">netsquid.protocols.serviceprotocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netsquid.util.html">netsquid.util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.simtools.html">netsquid.util.simtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.simlog.html">netsquid.util.simlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.simstats.html">netsquid.util.simstats</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.datacollector.html">netsquid.util.datacollector</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.cycache.html">netsquid.util.cycache</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.cymath.html">netsquid.util.cymath</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_util/netsquid.util.constrainedmap.html">netsquid.util.constrainedmap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netsquid.examples.html">netsquid.examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.teleportation.html">netsquid.examples.teleportation</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.entanglenodes.html">netsquid.examples.entanglenodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.purify.html">netsquid.examples.purify</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.repeater.html">netsquid.examples.repeater</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.repeater_chain.html">netsquid.examples.repeater_chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.simple_link.html">netsquid.examples.simple_link</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_examples/netsquid.examples.magic_simple_link.html">netsquid.examples.magic_simple_link</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_pydynaa.html">pyDynAA package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html">pydynaa.Entity</a></li>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html#pydynaa-event">pydynaa.Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html#pydynaa-eventtype">pydynaa.EventType</a></li>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html#pydynaa-eventexpression">pydynaa.EventExpression</a></li>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html#pydynaa-eventhandler">pydynaa.EventHandler</a></li>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html#pydynaa-expressionhandler">pydynaa.ExpressionHandler</a></li>
<li class="toctree-l2"><a class="reference internal" href="pydynaa.html#pydynaa-simulationengine">pydynaa.SimulationEngine</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="INSTALL-SOURCE.html">Installation from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #E3E3E3" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NetSquid</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="tutorial.intro.html">Tutorial</a></li>
      <li class="breadcrumb-item active">The Quantum Processor</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.quantumprocessor.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="tutorial.protocols.html" class="btn btn-neutral float-left" title="Protocols" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial.simulation.html" class="btn btn-neutral float-right" title="A full simulation" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-quantum-processor">
<h1>The Quantum Processor<a class="headerlink" href="#the-quantum-processor" title="Link to this heading"></a></h1>
<p>This section of the tutorial is dedicated to the <em>quantum processor</em> component (<a class="reference internal" href="api_components/netsquid.components.qprocessor.html#netsquid.components.qprocessor.QuantumProcessor" title="netsquid.components.qprocessor.QuantumProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">QuantumProcessor</span></code></a>), a subclass of the <em>quantum memory</em> (<code class="xref py py-class docutils literal notranslate"><span class="pre">QuantumMemory</span></code>) that models the (imperfect) application of quantum gates and other <em>instructions</em> to the stored qubits.</p>
<p class="topic-title">Learning goals</p><ul class="simple">
<li><p>Representing quantum operations on a quantum device by <em>instructions</em>
(<strong>essential</strong>).</p></li>
<li><p>Using a quantum processor to model the noise and delays of <em>physical instructions</em>
(<strong>advanced</strong>).</p></li>
<li><p>Creating quantum programs to programmatically apply instructions
(<strong>advanced</strong>).</p></li>
</ul>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#instructions-for-quantum-memory-devices" id="id1">Instructions for quantum memory devices</a></p></li>
<li><p><a class="reference internal" href="#physical-instructions" id="id2">Physical instructions <sup>*</sup></a></p></li>
<li><p><a class="reference internal" href="#quantum-programs" id="id3">Quantum programs <sup>*</sup></a></p></li>
<li><p><a class="reference internal" href="#local-teleportation-example-using-programs" id="id4">Local teleportation example using programs <sup>*</sup></a></p></li>
<li><p><a class="reference internal" href="#additional-features" id="id5">Additional features <sup>*</sup></a></p></li>
</ul>
</nav>
<p><em>Advanced sections are denoted by an asterix (*).</em></p>
<section id="instructions-for-quantum-memory-devices">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Instructions for quantum memory devices</a><a class="headerlink" href="#instructions-for-quantum-memory-devices" title="Link to this heading"></a></h2>
<p>Instructions (<a class="reference internal" href="api_components/netsquid.components.instructions.html#netsquid.components.instructions.Instruction" title="netsquid.components.instructions.Instruction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instruction</span></code></a>) represent low-level commands that run on a <em>quantum memory</em> and its subclasses; in particular the <em>quantum processor</em> as we will soon see.
The <em>netsquid.components.instructions</em> module defines subclasses that can be used to create instructions,
such as the <a class="reference internal" href="api_components/netsquid.components.instructions.html#netsquid.components.instructions.IGate" title="netsquid.components.instructions.IGate"><code class="xref py py-class docutils literal notranslate"><span class="pre">IGate</span></code></a> class for creating quantum gate instructions.
It also defines a set of instruction objects, for example: <a class="reference internal" href="api_components/netsquid.components.instructions.html#netsquid.components.instructions.INSTR_INIT" title="netsquid.components.instructions.INSTR_INIT"><code class="xref py py-class docutils literal notranslate"><span class="pre">INSTR_INIT</span></code></a>  for initialising qubits, <a class="reference internal" href="api_components/netsquid.components.instructions.html#netsquid.components.instructions.INSTR_MEASURE" title="netsquid.components.instructions.INSTR_MEASURE"><code class="xref py py-class docutils literal notranslate"><span class="pre">INSTR_MEASURE</span></code></a> for measuring a qubit, <a class="reference internal" href="api_components/netsquid.components.instructions.html#netsquid.components.instructions.INSTR_H" title="netsquid.components.instructions.INSTR_H"><code class="xref py py-class docutils literal notranslate"><span class="pre">INSTR_H</span></code></a> for applying a Hadamard gate, etc.</p>
<p>Instructions can be applied to a quantum memory by using the instructions directly as callable objects with the quantum memory as the first argument:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">netsquid.components.instructions</span> <span class="k">as</span> <span class="nn">instr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.components.qmemory</span> <span class="kn">import</span> <span class="n">QuantumMemory</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qmemory</span> <span class="o">=</span> <span class="n">QuantumMemory</span><span class="p">(</span><span class="s1">&#39;ExampleQMem&#39;</span><span class="p">,</span> <span class="n">num_positions</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">(</span><span class="n">qmemory</span><span class="p">,</span> <span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">(</span><span class="n">qmemory</span><span class="p">,</span> <span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE_X</span><span class="p">(</span><span class="n">qmemory</span><span class="p">,</span> <span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">[0]</span>
</pre></div>
</div>
<p>New instructions can be created using the provided base subclasses,
for instance a custom gate instruction can instantiated as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.qubits</span> <span class="kn">import</span> <span class="n">operators</span> <span class="k">as</span> <span class="n">ops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">INSTR_XY</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">IGate</span><span class="p">(</span><span class="s2">&quot;xy_gate&quot;</span><span class="p">,</span> <span class="n">ops</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">ops</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="api_components/netsquid.components.qprocessor.html#netsquid.components.qprocessor.QuantumProcessor" title="netsquid.components.qprocessor.QuantumProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">QuantumProcessor</span></code></a> base class adds specialised methods to the <a class="reference internal" href="api_components/netsquid.components.qmemory.html#netsquid.components.qmemory.QuantumMemory" title="netsquid.components.qmemory.QuantumMemory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QuantumMemory</span></code></a> for handling instructions.
For example, the <a class="reference internal" href="api_components/netsquid.components.qprocessor.html#netsquid.components.qprocessor.QuantumProcessor.execute_instruction" title="netsquid.components.qprocessor.QuantumProcessor.execute_instruction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute_instruction()</span></code></a> method can be used to execute instructions, as we demonstrate for an entangling circuit:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.components.qprocessor</span> <span class="kn">import</span> <span class="n">QuantumProcessor</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qproc</span> <span class="o">=</span> <span class="n">QuantumProcessor</span><span class="p">(</span><span class="s2">&quot;ExampleQPU&quot;</span><span class="p">,</span> <span class="n">num_positions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">fallback_to_nonphysical</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span> <span class="o">=</span> <span class="n">qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span> <span class="o">=</span> <span class="n">qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span> <span class="o">==</span> <span class="n">m2</span>  <span class="c1"># Measurement results are both the same (either both 1 or both 0)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_time</span><span class="p">()</span>
<span class="go">0.0</span>
</pre></div>
</div>
</section>
<section id="physical-instructions">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Physical instructions <sup>*</sup></a><a class="headerlink" href="#physical-instructions" title="Link to this heading"></a></h2>
<p>Instructions are intended to be agnostic of the quantum memory or processor they are executed on.
As such, instructions as executed above are effectively non-physical:
they are applied instantly and without any errors.
To model an instruction’s physical duration and any associated error models a quantum processor can specify a separate set of <em>physical instructions</em> (<a class="reference internal" href="api_components/netsquid.components.qprocessor.html#netsquid.components.qprocessor.PhysicalInstruction" title="netsquid.components.qprocessor.PhysicalInstruction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PhysicalInstruction</span></code></a>) that executed instructions can mapped to.</p>
<p>Let us consider an example of how to specify physical instructions for a quantum processor that has the following (toy) characteristics:</p>
<ul class="simple">
<li><p>Three qubit memory positions.</p></li>
<li><p>Qubits on any of the memory positions experience depolarisation noise when idle.</p></li>
<li><p>Initialisation of qubits on all of the memory positions takes 3 nanoseconds.</p></li>
<li><p>The single qubit gates Hadamard, X, Z and S can be applied to memory positions 0 and 2 and take 1 nanosecond.</p></li>
<li><p>Applying the CNOT gate takes 4 nanoseconds and can only have memory position 1 as its target.</p></li>
<li><p>All qubits can be measured in the standard (Z) basis, which takes 7 nanoseconds. A measurement of position 1 suffers depolarising noise.</p></li>
</ul>
<p>Furthermore, some of the instructions can be executed in parallel on different qubits e.g.
applying an X Gate on position 0 can be done simultaneously to applying a Hadamard gate on position 2.
A setup that implements the physical constraints above is:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.components.models.qerrormodels</span> <span class="kn">import</span> <span class="n">DepolarNoiseModel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.components.qprocessor</span> <span class="kn">import</span> <span class="n">PhysicalInstruction</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">phys_instructions</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">topology</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">topology</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_X</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">topology</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_Z</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">topology</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_S</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">topology</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">quantum_noise_model</span><span class="o">=</span><span class="n">DepolarNoiseModel</span><span class="p">(</span><span class="n">depolar_rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">time_independent</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">apply_q_noise_after</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">topology</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">PhysicalInstruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">topology</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span> <span class="o">=</span> <span class="n">QuantumProcessor</span><span class="p">(</span><span class="s2">&quot;NoisyQPU&quot;</span><span class="p">,</span> <span class="n">num_positions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">mem_noise_models</span><span class="o">=</span><span class="p">[</span><span class="n">DepolarNoiseModel</span><span class="p">(</span><span class="mf">1e7</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">phys_instructions</span><span class="o">=</span><span class="n">phys_instructions</span><span class="p">)</span>
</pre></div>
</div>
<p>To limit the availability of physical instructions to specific memory positions we can specify a <em>topology</em>.
The physical instructions with their topologies are shown in the schematic below.</p>
<a class="reference internal image-reference" href="_images/QuantumProcessorSchematic.png"><img alt="_images/QuantumProcessorSchematic.png" class="align-center" src="_images/QuantumProcessorSchematic.png" style="width: 500px;" /></a>
<p>The quantum processor, unless initialised with <code class="docutils literal notranslate"><span class="pre">fallback_to_nonphysical=True</span></code>,
will throw an error when it cannot map the instruction to be executed to a matching physical instruction:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_Y</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">netsquid.components.qprocessor.MissingInstructionError</span>: <span class="n">...</span>
</pre></div>
</div>
<p>If we now execute the qubit initialisation instruction on memory positions 0 and 1 we expect it to take 3 nanoseconds:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_time</span><span class="p">()</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_time</span><span class="p">()</span>
<span class="go">3.0</span>
</pre></div>
</div>
<p>Problems arise, however, if we attempt to execute the rest of our entangling circuit:
trying to execute instructions while earlier instructions have not finished yet
will result in an error indicating that the processor is still busy.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">execute_instruction</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">netsquid.components.qprocessor.ProcessorBusyError</span>: <span class="n">...</span>
</pre></div>
</div>
<p>To prevent having to call <cite>ns.sim_run()</cite> between each instruction we can turn to <em>quantum programs</em> to apply
instructions sequentially, and even conditionally on previous the outcome of previous instructions.</p>
</section>
<section id="quantum-programs">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Quantum programs <sup>*</sup></a><a class="headerlink" href="#quantum-programs" title="Link to this heading"></a></h2>
<p>Quantum processors can execute quantum programs (<a class="reference internal" href="api_components/netsquid.components.qprogram.html#netsquid.components.qprogram.QuantumProgram" title="netsquid.components.qprogram.QuantumProgram"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QuantumProgram</span></code></a>).
Such a program consists of instruction(s) that are run in sequences.
The instructions are by default run in parallel if the quantum processor and physical instructions support this.
Furthermore, a program also supports control logic.
Similar to instructions, a program is intended to be agnostic to the type of quantum processor it is run on.
The <em>qubit indices</em> referred to in a program are <em>mapped</em> to the memory positions on a quantum processor when the program is executed,
which also maps the abstract instructions to the available physical instructions.</p>
<p>For example in its most basic form a quantum program can be created as a single sequence of instructions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">netsquid.components.qprogram</span> <span class="kn">import</span> <span class="n">QuantumProgram</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span> <span class="o">=</span> <span class="n">QuantumProgram</span><span class="p">(</span><span class="n">num_qubits</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">get_qubit_indices</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Get the qubit indices we&#39;ll be working with</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">,</span> <span class="p">[</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">q1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And can then be executed on the processor (using the same noisy processor that was created above):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">execute_program</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="n">qubit_mapping</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_time</span><span class="p">()</span>
<span class="go">15.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;m1&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">prog</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;m2&quot;</span><span class="p">]</span>  
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;m1&quot;</span><span class="p">],</span> <span class="n">prog</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;m2&quot;</span><span class="p">]</span>  
<span class="go">1, 1</span>
</pre></div>
</div>
<p>Such a single sequence of instructions can also be created by subclassing the QuantumProgram class.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">EntangleProgram</span><span class="p">(</span><span class="n">QuantumProgram</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">default_num_qubits</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_qubit_indices</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">,</span> <span class="p">[</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">q1</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m2&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>This program can be executed on multiple processors, as long as they support the instructions.
Depending on the processor the time and noise that is applied might differ.</p>
<p>Multiple sequences are defined using repeated yield statements calling the <cite>run()</cite> method.
During <cite>run()</cite> instructions store their output in a local state dictionary called output.
For example here the measurement results are stored in <cite>output[“m1”]</cite> and <cite>output[“m2”]</cite>.
Control logic can be used to select which instructions are called.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ControlledQProgram</span><span class="p">(</span><span class="n">QuantumProgram</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">default_num_qubits</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">q3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_qubit_indices</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">q1</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">... </span>        <span class="c1"># Depending on outcome on q1 either flip q2 or q3</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;m1&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_X</span><span class="p">,</span> <span class="n">q2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_X</span><span class="p">,</span> <span class="n">q3</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m2&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q3</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m3&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">parallel</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The parallel parameter in the <cite>run()</cite> method can be used to control whether the quantum processor attempts to run the
sequence in parallel.
To do so, both the matching PhysicalInstruction and quantum processor must support this.</p>
</section>
<section id="local-teleportation-example-using-programs">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Local teleportation example using programs <sup>*</sup></a><a class="headerlink" href="#local-teleportation-example-using-programs" title="Link to this heading"></a></h2>
<p>Let us use programs to perform a local teleportation example between the qubits on a single quantum processor with imperfect physical instructions i.e. teleport the state of a qubit on position 0 to memory position 2.</p>
<p>First, qubit 1 and 2 will need to be entangled.
This is done in parallel to creating the state to teleport.
A Bell measurement is performed on qubit 0 and 1 once the 3 qubits are ready.
The measurement results need to be known before the correction operations can be applied.
So the program first needs to run before the correction can take place.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">set_qstate_formalism</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">QFormalism</span><span class="o">.</span><span class="n">DM</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">TeleportationProgram</span><span class="p">(</span><span class="n">QuantumProgram</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">default_num_qubits</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">q0</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_qubit_indices</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">... </span>        <span class="c1"># Entangle q1 and q2:</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_INIT</span><span class="p">,</span> <span class="p">[</span><span class="n">q0</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">q2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="n">q2</span><span class="p">,</span> <span class="n">q1</span><span class="p">])</span>
<span class="gp">... </span>        <span class="c1"># Set q0 to the desired state to be teleported:</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">q0</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_S</span><span class="p">,</span> <span class="n">q0</span><span class="p">)</span>
<span class="gp">... </span>        <span class="c1"># Bell measurement:</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="n">q0</span><span class="p">,</span> <span class="n">q1</span><span class="p">])</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_H</span><span class="p">,</span> <span class="n">q0</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q0</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;M1&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;M2&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">... </span>        <span class="c1"># Do corrections:</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;M2&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_X</span><span class="p">,</span> <span class="n">q2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;M1&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_Z</span><span class="p">,</span> <span class="n">q2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_qproc</span><span class="o">.</span><span class="n">execute_program</span><span class="p">(</span><span class="n">TeleportationProgram</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">sim_run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qubit</span> <span class="o">=</span> <span class="n">noisy_qproc</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fidelity</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">qubits</span><span class="o">.</span><span class="n">fidelity</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">qubit</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">qubits</span><span class="o">.</span><span class="n">outerprod</span><span class="p">((</span><span class="n">ns</span><span class="o">.</span><span class="n">S</span><span class="o">*</span><span class="n">ns</span><span class="o">.</span><span class="n">H</span><span class="o">*</span><span class="n">ns</span><span class="o">.</span><span class="n">s0</span><span class="p">)</span><span class="o">.</span><span class="n">arr</span><span class="p">),</span> <span class="n">squared</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fidelity</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">0.922</span>
</pre></div>
</div>
</section>
<section id="additional-features">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Additional features <sup>*</sup></a><a class="headerlink" href="#additional-features" title="Link to this heading"></a></h2>
<p>The parameter physical can be used to indicate whether a quantum processor should match the instruction to a
PhysicalInstruction or execute it instantly and without noise, i.e. non-physical.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CheatingQProgram</span><span class="p">(</span><span class="n">QuantumProgram</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">default_num_qubits</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_qubit_indices</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_X</span><span class="p">,</span> <span class="n">q1</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_SIGNAL</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_Z</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_CNOT</span><span class="p">,</span> <span class="p">[</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_MEASURE</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;m2&quot;</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>A program can load in another program using the <a class="reference internal" href="api_components/netsquid.components.qprogram.html#netsquid.components.qprogram.QuantumProgram.load" title="netsquid.components.qprogram.QuantumProgram.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> method.
Loaded programs share the output dictionary.
Loading programs works to arbitrary depth.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">LoadingQProgram</span><span class="p">(</span><span class="n">QuantumProgram</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">default_num_qubits</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># Run a regular sequence</span>
<span class="gp">... </span>        <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_qubit_indices</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">INSTR_X</span><span class="p">,</span> <span class="n">q1</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">... </span>        <span class="c1"># Load and run another program</span>
<span class="gp">... </span>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">CheatingQProgram</span><span class="p">)</span>
</pre></div>
</div>
<p>Programs can be concatenated using the addition operator,
where one of the operands can also be a class instead of an instance:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prog3</span> <span class="o">=</span> <span class="n">prog1</span> <span class="o">+</span> <span class="n">prog2</span>  
</pre></div>
</div>
<p>Programs can be repeated using the multiplication operator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prog2</span> <span class="o">=</span> <span class="n">prog1</span> <span class="o">*</span> <span class="mi">5</span>  
</pre></div>
</div>
<p>In all cases the output dictionary is shared among the combined programs.</p>
<section id="what-is-next">
<h3>What is next?<a class="headerlink" href="#what-is-next" title="Link to this heading"></a></h3>
<p>Now we know how to apply noisy quantum operations on quantum processors using quantum programs.
We can use these programs in our protocols to finalize a full working teleportation example with noise on the memory,
channels and operations.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tutorial.protocols.html" class="btn btn-neutral float-left" title="Protocols" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial.simulation.html" class="btn btn-neutral float-right" title="A full simulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2021, TNO and TUDelft (QuTech).</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 1.1.7
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      <dd><a href="/1-1-stable/">1.1.5</a></dd>
      <dd><a href="/1-0-stable/">1.0.7</a></dd>
      <dd><a href="/0-10-stable/">0.10.4</a></dd>
      <dd><a href="/0-9-stable/">0.9.11</a></dd>
      <dd><a href="/0-8-stable/">0.8.7</a></dd>
      <dd><a href="/0-7-stable/">0.7.5</a></dd>
      <dd><a href="/0-6-stable/">0.6.4</a></dd>
      <dd><a href="/0-5-stable/">0.5.2</a></dd>
      <dd><a href="/0-4-stable/">0.4.2</a></dd>
      <dd><a href="/0-3-stable/">0.3.5</a></dd>
      <dd><a href="/latest-release/">latest release</a></dd>
      <dd><a href="/master/">master branch</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".highlight-default .highlight").each(function() {
            if ($(this).find(".gp").length > 0) {
             $(this).prepend("<div class='codebtn btn btn-neutral float-right'><div class='gp'>>>></div><div>");
             $(this).children("pre").contents().filter(function() {return this.nodeType === 3;}).wrap("<span></span>").end();
            }
        });
        $(".highlight-default .highlight .codebtn").click(function() {
            $(this).parent().children("pre").find(".gp").toggleClass("hidden");
            var traceback_elem = $(this).parent().children("pre").find(".gt, .go");
            traceback_elem.toggleClass("hidden");
            traceback_elem.nextUntil(".gp, .go").toggleClass("hidden");

        })
    });
</script>


</body>
</html>